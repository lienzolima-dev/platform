import"./hoisted.BDTLHWbf.js";import{a as c,i as a}from"./_astro_actions.B-cTUEzu.js";import{o as l,c as i}from"./utils.oMC_d_GW.js";import"./Dialog.astro_astro_type_script_index_0_lang.C-5Vl6lh.js";document.querySelectorAll(".form-group input").forEach(e=>{e.addEventListener("input",()=>{e.value?e.classList.add("has-content"):e.classList.remove("has-content")})});document.querySelectorAll(".form-group textarea").forEach(e=>{e.addEventListener("input",()=>{e.value?e.classList.add("has-content"):e.classList.remove("has-content")})});try{const e=document.getElementById("complaint-form"),t=document.getElementById("error-content"),s=document.getElementById("complaint-submit-btn");if(!(e instanceof HTMLFormElement))throw new Error("Form not found");if(!(s instanceof HTMLButtonElement))throw new Error("Submit button not found");if(!(t instanceof HTMLElement))throw new Error("Error content not found");document.querySelectorAll(".form-group input, .form-group textarea, .form-group select").forEach(n=>{n.addEventListener("input",()=>{const o=document.getElementById("error-content");o&&(o.innerText="")})}),e.addEventListener("submit",async n=>{n.preventDefault(),t.innerText="";const o=new FormData(e);s.disabled=!0;const{error:r}=await c.db.complaints.addComplaint(o);if(s.disabled=!1,r){if(a(r)){t.innerText=r.issues[0].message;return}t.innerText=r.message;return}l("successful-complaint-popup")}),document.addEventListener("dialog-close",n=>{n.detail.id==="successful-complaint-popup"&&location.reload()})}catch(e){console.error("[ERROR]: ",e)}class u extends HTMLElement{connectedCallback(){this.querySelector(".accept-button")?.addEventListener("click",t=>{t.preventDefault(),i("successful-complaint-popup")})}}customElements.define("successful-complaint-popup",u);
