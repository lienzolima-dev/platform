import"./Dialog.astro_astro_type_script_index_0_lang.C-5Vl6lh.js";import{o as c,c as f}from"./utils.oMC_d_GW.js";import{u as E}from"./filter.Dk79kzbe.js";import{a as i,i as l}from"./_astro_actions.B-cTUEzu.js";import"./CloseMenuButton.astro_astro_type_script_index_0_lang.nee8CeAz.js";const u=document.getElementById("add-extra-btn"),m=document.getElementById("search-extra-btn"),s=document.getElementById("e-search-input");try{if(!u)throw new Error("Add extra button not found");if(!(m instanceof HTMLButtonElement))throw new Error("Search extra button not found");if(!(s instanceof HTMLInputElement))throw new Error("Search input not found");u.addEventListener("click",()=>{c("addExtra")});const n=()=>{const t=new URL(window.location.href),e=E(t,{search:s.value.trim(),page:"1"});window.location.href=e};m.addEventListener("click",n),s.addEventListener("keydown",t=>{t.key==="Enter"&&n()})}catch(n){console.error("Error: ",n)}class x extends HTMLElement{connectedCallback(){const t=this.querySelector("form"),e=document.getElementById("e-error-content"),o=this.querySelector(".submit-button");if(!t)throw new Error("Form not found");if(!e)throw new Error("Error content not found");if(!(o instanceof HTMLButtonElement))throw new Error("Submit button not found");t.addEventListener("submit",async d=>{d.preventDefault();const r=new FormData(t);o.disabled=!0;const{error:a}=await i.db.extras.addExtra(r);if(o.disabled=!1,!a){location.reload();return}if(a){if(l(a)){e.innerText=a.issues[0].message;return}e.innerText=a.message;return}})}}customElements.define("extra-add-form",x);try{const n=document.getElementById("edit-extra-form"),t=document.getElementById("errorContent"),e=document.getElementById("e-edit-submit-btn");if(!(n instanceof HTMLFormElement))throw new Error("Form not found");if(!t)throw new Error("Error content not found");if(!(e instanceof HTMLButtonElement))throw new Error("Submit button not found");n.addEventListener("submit",async o=>{o.preventDefault();const d=new FormData(n);e.disabled=!0;const{error:r}=await i.db.extras.editExtra(d);if(e.disabled=!1,!r){location.reload();return}if(r){if(l(r)){t.innerText=r.issues[0].message;return}t.innerText=r.message;return}})}catch(n){console.error("Error:",n)}try{const n=document.getElementById("delete-extra-form"),t=document.getElementById("e-delete-submit-btn"),e=document.querySelector("button.e-cancel"),o=document.getElementById("e-delete-error-content");if(!e||!(t instanceof HTMLButtonElement))throw"Button not found";if(!(n instanceof HTMLFormElement))throw"Form not found";if(!o)throw"Error content not found";n.addEventListener("submit",async d=>{d.preventDefault();const r=new FormData(n);t.disabled=!0;const{error:a}=await i.db.extras.deleteExtra(r);if(t.disabled=!1,!a){location.reload();return}o.innerText=a.message}),e.addEventListener("click",()=>f("deleteExtra"))}catch(n){console.error("Error:",n)}class w extends HTMLElement{connectedCallback(){const t=this.querySelector("button"),e=document.getElementById("edit-extra-form");if(!t)throw"Button not found";if(!(e instanceof HTMLFormElement))throw new Error("Form not found");const o=JSON.parse(this.dataset.extra||"{}");t.addEventListener("click",async()=>{e.extraId.value=o.id,e.nameExtra.value=o.name,e.price.value=o.price,e.description.value=o.description,c("editExtra")})}}customElements.define("extra-edit-button",w);class b extends HTMLElement{connectedCallback(){const t=this.querySelector("button"),e=document.getElementById("delete-extra-form"),o=document.getElementById("e-delete-error-content"),d=document.getElementById("selected-extra");if(!t)throw"Button not found";if(!(e instanceof HTMLFormElement))throw"Form not found";if(!d)throw"Selected extra element not found";if(!o)throw"Error content not found";t.addEventListener("click",()=>{const{id:r,name:a}=JSON.parse(this.dataset.extra||"{}");e.extraId.value=r,d.innerHTML=a,o.innerText="",c("deleteExtra")})}}customElements.define("extra-delete-button",b);
