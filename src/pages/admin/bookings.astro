---
import SideBar from "../../components/admin/SideBar.astro";
import AdminLayout from "../../layouts/AdminLayout.astro";
import Header from "../../components/admin/Header.astro";
import BookingForm from "../../components/admin/bookings/BookingForm.svelte";
import BookingsTable from "../../components/admin/bookings/BookingsTable.astro";
import Dialog from "../../components/global/dialog/Dialog.astro";
// import BookingEditForm from "../../components/admin/bookings/BookingEditForm.astro";
import BookingDeleteForm from "../../components/admin/bookings/BookingDeleteForm.astro";

const user = Astro.locals.user;

// If the user is not an admin, redirect to the home page
if (!user || user.role !== "admin") return Astro.redirect("/home", 302);

const { avatarURL, username, role } = user;
---

<AdminLayout title="Admin">
  <SideBar />
  <div>
    <Header {avatarURL} {username} {role} />
    <main>
      <h1>AÃ±adir reserva</h1>
      <BookingForm client:load />
      <h1>Reservas</h1>
      <BookingsTable />
      <!-- <Dialog id="editBooking"><BookingEditForm /></Dialog> -->
      <Dialog id="deleteBooking"><BookingDeleteForm /></Dialog>
    </main>
  </div>
</AdminLayout>

<style>
  h1 {
    font-size: 2rem;
    font-weight: bold;
  }

  main {
    padding-top: var(--section-spacing);
    padding-inline: var(--section-spacing);
    padding-bottom: var(--section-spacing);
    margin: 0 auto;
    width: 100%;
    max-width: 1440px;
    display: flex;
    flex-direction: column;
    gap: 2rem;
  }

  .content {
    display: flex;
    flex-direction: column;
    gap: 3rem;
  }
</style>
